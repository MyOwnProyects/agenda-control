<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="utf-8"/>
  <meta content="width=device-width, initial-scale=1.0" name="viewport"/>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet"/>
  <link href="https://fonts.googleapis.com/css2?family=Manrope:wght@200;300;400;500;600;700;800&display=swap" rel="stylesheet"/>
  <link href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:wght@100..700,0..1&display=swap" rel="stylesheet"/>
  <title>Seleccionar Plantilla de WhatsApp</title>
  <style>


    /* ── Todos los estilos del modal apuntan a .whatsappModal ── */

    .whatsappModal .modal-header {
      padding: 1.25rem 1.5rem;
      border-bottom: 1px solid rgba(var(--primary-rgb), 0.1);
      align-items: flex-start;
    }

    .whatsappModal .modal-header h2 {
      font-size: 1.4rem;
      font-weight: 700;
      letter-spacing: -0.025em;
      color: #0f172a;
      margin: 0;
    }

    .whatsappModal .modal-header p {
      font-size: 0.875rem;
      color: #64748b;
      margin: 0.25rem 0 0;
    }

    .whatsappModal .btn-close-custom {
      background: none;
      border: none;
      color: #94a3b8;
      cursor: pointer;
      padding: 0;
      line-height: 1;
      transition: color 0.15s;
    }

    .whatsappModal .btn-close-custom:hover {
      color: var(--primary);
    }

    .whatsappModal .modal-body {
      padding: 1.5rem;
      display: flex;
      flex-direction: column;
      gap: 1rem;
      overflow-y: auto;
      max-height: 55vh;
    }

    .whatsappModal .template-card {
      display: flex;
      flex-direction: column;
      gap: 0.75rem;
      padding: 1rem;
      border-radius: 0.5rem;
      border: 1px solid #e2e8f0;
      background: #fff;
      cursor: pointer;
      transition: border-color 0.15s;
      margin: 0;
    }

    .whatsappModal .template-card:hover {
      border-color: rgba(var(--primary-rgb), 0.5);
    }

    .whatsappModal .template-card.selected {
      border: 2px solid var(--primary);
      background-color: rgba(var(--primary-rgb), 0.04);
    }

    .whatsappModal .card-top {
      display: flex;
      align-items: center;
      justify-content: space-between;
    }

    .whatsappModal .card-top-left {
      display: flex;
      align-items: center;
      gap: 0.75rem;
    }

    .whatsappModal .template-card input[type="radio"] {
      width: 1.25rem;
      height: 1.25rem;
      accent-color: var(--primary);
      flex-shrink: 0;
    }

    .whatsappModal .card-title {
      font-weight: 700;
      color: #0f172a;
      font-size: 0.95rem;
    }

    .whatsappModal .badge-recommended {
      font-size: 0.625rem;
      font-weight: 700;
      text-transform: uppercase;
      letter-spacing: 0.1em;
      padding: 0.2rem 0.5rem;
      border-radius: 9999px;
      background-color: var(--primary);
      color: #fff;
    }

    .whatsappModal .template-preview {
      background-color: #f1f5f9;
      padding: 0.75rem;
      border-radius: 0.5rem;
      border: 1px solid #e2e8f0;
    }

    .whatsappModal .template-preview p {
      font-size: 0.875rem;
      color: #64748b;
      font-style: italic;
      line-height: 1.625;
      margin: 0;
    }

    .whatsappModal .var-highlight {
      color: var(--primary);
      font-weight: 600;
      font-style: normal;
    }

    .whatsappModal .info-hint {
      padding: 0.75rem 1.5rem;
      background-color: rgba(var(--primary-rgb), 0.05);
      border-top: 1px solid rgba(var(--primary-rgb), 0.1);
      display: flex;
      align-items: flex-start;
      gap: 0.75rem;
    }

    .whatsappModal .info-hint .material-symbols-outlined {
      color: var(--primary);
      font-size: 1.25rem;
      flex-shrink: 0;
    }

    .whatsappModal .info-hint p {
      font-size: 0.75rem;
      color: #475569;
      margin: 0;
    }

    .whatsappModal .modal-footer {
      padding: 1.25rem 1.5rem;
      background-color: rgba(241, 245, 249, 0.6);
      border-top: 1px solid rgba(var(--primary-rgb), 0.1);
      justify-content: space-between;
    }
  </style>
</head>
<body>

  <!-- Page content (background mock) -->
  <div class="p-4" style="max-width:72rem; margin:0 auto;">
    <div class="bg-secondary rounded-3 mb-4" style="height:3rem; width:16rem; opacity:.3;"></div>
    <div class="row g-3 mb-4">
      <div class="col-3"><div class="bg-white rounded-3" style="height:8rem; opacity:.3;"></div></div>
      <div class="col-3"><div class="bg-white rounded-3" style="height:8rem; opacity:.3;"></div></div>
      <div class="col-3"><div class="bg-white rounded-3" style="height:8rem; opacity:.3;"></div></div>
      <div class="col-3"><div class="bg-white rounded-3" style="height:8rem; opacity:.3;"></div></div>
    </div>
    <div class="bg-white rounded-3 mb-4" style="height:10rem; opacity:.3;"></div>

    <!-- Botón disparador del modal -->
    <div class="d-flex justify-content-center mt-5">
      <button class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#whatsappModal">
        <span class="material-symbols-outlined" style="font-size:1.2rem;">send</span>
        Enviar plantilla de WhatsApp
      </button>
    </div>
  </div>

  <!-- ===================== MODAL BOOTSTRAP 5 ===================== -->
  <div class="modal fade whatsappModal" id="whatsappModal" tabindex="-1" aria-labelledby="whatsappModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered" style="max-width:640px;">
      <div class="modal-content">

        <!-- Header -->
        <div class="modal-header">
          <div>
            <h2 id="whatsappModalLabel">Seleccionar Plantilla de WhatsApp</h2>
            <p>Elija una plantilla pre-definida para enviar al paciente</p>
          </div>
        </div>

        <!-- Body (scrollable) -->
        <div class="modal-body">

          <!-- Card 1 (Seleccionada) -->
          <label class="template-card selected">
            <div class="card-top">
              <div class="card-top-left">
                <input checked name="template" type="radio"/>
                <span class="card-title">Confirmación de Cita</span>
              </div>
              <span class="badge-recommended">Recomendado</span>
            </div>
            <div class="template-preview">
              <p>
                "Hola <span class="var-highlight">[Nombre]</span>, confirmamos su cita para el día
                <span class="var-highlight">[Fecha]</span> a las <span class="var-highlight">[Hora]</span>
                en nuestro centro médico. Por favor, llegue 10 minutos antes."
              </p>
            </div>
          </label>

          <!-- Card 2 -->
          <label class="template-card">
            <div class="card-top-left">
              <input name="template" type="radio"/>
              <span class="card-title">Recordatorio de Cita</span>
            </div>
            <div class="template-preview">
              <p>"Le recordamos su próxima cita médica programada para mañana. Si necesita reprogramar, por favor responda a este mensaje."</p>
            </div>
          </label>

          <!-- Card 3 -->
          <label class="template-card">
            <div class="card-top-left">
              <input name="template" type="radio"/>
              <span class="card-title">Aviso de Retraso</span>
            </div>
            <div class="template-preview">
              <p>"Estimado paciente, el doctor presenta un breve retraso en las consultas de hoy. Le atenderemos lo más pronto posible. Agradecemos su comprensión."</p>
            </div>
          </label>

          <!-- Card 4 -->
          <label class="template-card">
            <div class="card-top-left">
              <input name="template" type="radio"/>
              <span class="card-title">Resultados Disponibles</span>
            </div>
            <div class="template-preview">
              <p>"Sus resultados de laboratorio ya están disponibles en nuestro portal del paciente. Puede acceder con su número de identificación."</p>
            </div>
          </label>

        </div>

        <!-- Footer -->
        <div class="modal-footer justify-content-between">
          <button class="btn btn-outline-secondary" data-bs-dismiss="modal">Cancelar</button>
          <button class="btn btn-success d-flex align-items-center gap-2">
            <i class="bi bi-whatsapp"></i>
            <span>Enviar mensaje</span>
          </button>
        </div>

      </div>
    </div>
  </div>

  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/jquery@3.7.1/dist/jquery.min.js"></script>
  <script>
    $(function () {

      // Selección de tarjeta: delegación en document para funcionar con clones
      $(document).on('change', '.whatsappModal input[type="radio"]', function () {
        var $modal = $(this).closest('.whatsappModal');
        $modal.find('.template-card').removeClass('selected');
        $(this).closest('.template-card').addClass('selected');
      });

      // Cerrar modal al hacer clic en botones con data-bs-dismiss (clones no tienen ID)
      $(document).on('click', '.whatsappModal [data-bs-dismiss="modal"]', function () {
        var $modal = $(this).closest('.whatsappModal');
        var bsModal = bootstrap.Modal.getInstance($modal[0]);
        if (bsModal) bsModal.hide();
      });

    });
  </script>
</body>
</html>